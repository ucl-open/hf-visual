{
  "$defs": {
    "DisplayCalibration": {
      "properties": {
        "intrinsics": {
          "$ref": "#/$defs/DisplayIntrinsics",
          "default": {
            "frameWidth": 1920,
            "frameHeight": 1080,
            "displayWidth": 20.0,
            "displayHeight": 15.0
          },
          "description": "Intrinsics",
          "title": "Intrinsics"
        },
        "extrinsics": {
          "$ref": "#/$defs/DisplayExtrinsics",
          "default": {
            "rotation": {
              "x": 0.0,
              "y": 0.0,
              "z": 0.0
            },
            "translation": {
              "x": 0.0,
              "y": 1.309016,
              "z": -13.27
            }
          },
          "description": "Extrinsics",
          "title": "Extrinsics"
        }
      },
      "title": "DisplayCalibration",
      "type": "object"
    },
    "DisplayExtrinsics": {
      "properties": {
        "rotation": {
          "$ref": "#/$defs/Vector3",
          "default": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "description": "Rotation vector (radians)",
          "title": "Rotation"
        },
        "translation": {
          "$ref": "#/$defs/Vector3",
          "default": {
            "x": 0.0,
            "y": 1.309016,
            "z": -13.27
          },
          "description": "Translation (in cm)",
          "title": "Translation"
        }
      },
      "title": "DisplayExtrinsics",
      "type": "object"
    },
    "DisplayIntrinsics": {
      "properties": {
        "frameWidth": {
          "default": 1920,
          "description": "Frame width (px)",
          "minimum": 0,
          "title": "FrameWidth",
          "type": "integer"
        },
        "frameHeight": {
          "default": 1080,
          "description": "Frame height (px)",
          "minimum": 0,
          "title": "FrameHeight",
          "type": "integer"
        },
        "displayWidth": {
          "default": 20,
          "description": "Display width (cm)",
          "minimum": 0,
          "title": "DisplayWidth",
          "type": "number"
        },
        "displayHeight": {
          "default": 15,
          "description": "Display width (cm)",
          "minimum": 0,
          "title": "DisplayHeight",
          "type": "number"
        }
      },
      "title": "DisplayIntrinsics",
      "type": "object"
    },
    "MatrixArduino": {
      "properties": {
        "deviceType": {
          "const": "MatrixArduino",
          "default": "MatrixArduino",
          "title": "DeviceType",
          "type": "string"
        },
        "portName": {
          "description": "The name of the device serial port.",
          "examples": [
            "COMx"
          ],
          "title": "PortName",
          "type": "string"
        },
        "baudRate": {
          "default": 9600,
          "description": "Baud rate for serial communication.",
          "title": "BaudRate",
          "type": "integer"
        },
        "encoding": {
          "default": null,
          "description": "Optional text encoding for interpreting incoming bytes.",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Encoding"
        },
        "newLine": {
          "default": "\r\n",
          "description": "Line termination sequence used to delimit incoming messages.",
          "title": "NewLine",
          "type": "string"
        },
        "parity": {
          "default": "None",
          "description": "Parity checking mode for the serial port.",
          "title": "Parity",
          "type": "string"
        },
        "parityReplace": {
          "default": 63,
          "description": "Byte used to replace invalid bytes detected by a parity error.",
          "title": "ParityReplace",
          "type": "integer"
        },
        "dataBits": {
          "default": 8,
          "description": "Number of data bits per serial frame.",
          "title": "DataBits",
          "type": "integer"
        },
        "stopBits": {
          "default": "One",
          "description": "Number of stop bits per serial frame.",
          "title": "StopBits",
          "type": "string"
        },
        "handshake": {
          "default": "None",
          "description": "Hardware or software handshaking mode.",
          "title": "Handshake",
          "type": "string"
        },
        "discardNull": {
          "default": false,
          "description": "Whether to discard null bytes appearing in the serial stream.",
          "title": "DiscardNull",
          "type": "boolean"
        },
        "dtrEnable": {
          "default": false,
          "description": "Whether to enable Data Terminal Ready (DTR) control line.",
          "title": "DtrEnable",
          "type": "boolean"
        },
        "rtsEnable": {
          "default": false,
          "description": "Whether to enable Request To Send (RTS) control line.",
          "title": "RtsEnable",
          "type": "boolean"
        },
        "readBufferSize": {
          "default": 4096,
          "description": "Size, in bytes, of the read buffer.",
          "title": "ReadBufferSize",
          "type": "integer"
        },
        "writeBufferSize": {
          "default": 2048,
          "description": "Size, in bytes, of the write buffer.",
          "title": "WriteBufferSize",
          "type": "integer"
        },
        "receivedBytesThreshold": {
          "default": 1,
          "description": "Minimum number of bytes in the buffer that triggers a read event.",
          "title": "ReceivedBytesThreshold",
          "type": "integer"
        },
        "serialMessageSubjectName": {
          "default": "SerialMessages",
          "description": "Name of the subject to which parsed serial messages are published.",
          "title": "SerialMessageSubjectName",
          "type": "string"
        }
      },
      "required": [
        "portName"
      ],
      "title": "MatrixArduino",
      "type": "object"
    },
    "MatrixArduinoData": {
      "properties": {
        "encoderCount": {
          "title": "EncoderCount",
          "type": "integer"
        },
        "lickCountLeft": {
          "title": "LickCountLeft",
          "type": "integer"
        },
        "lickCountRight": {
          "title": "LickCountRight",
          "type": "integer"
        },
        "lastSyncPulseTime": {
          "title": "LastSyncPulseTime",
          "type": "integer"
        },
        "photodiodeVal": {
          "title": "PhotodiodeVal",
          "type": "integer"
        },
        "currentMs": {
          "title": "CurrentMs",
          "type": "integer"
        }
      },
      "required": [
        "encoderCount",
        "lickCountLeft",
        "lickCountRight",
        "lastSyncPulseTime",
        "photodiodeVal",
        "currentMs"
      ],
      "title": "MatrixArduinoData",
      "type": "object"
    },
    "MatrixArduinoPhotodiode": {
      "properties": {
        "deviceType": {
          "const": "MatrixArduinoPhotodiode",
          "default": "MatrixArduinoPhotodiode",
          "title": "DeviceType",
          "type": "string"
        },
        "portName": {
          "description": "The name of the device serial port.",
          "examples": [
            "COMx"
          ],
          "title": "PortName",
          "type": "string"
        },
        "baudRate": {
          "default": 9600,
          "description": "Baud rate for serial communication.",
          "title": "BaudRate",
          "type": "integer"
        },
        "encoding": {
          "default": null,
          "description": "Optional text encoding for interpreting incoming bytes.",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Encoding"
        },
        "newLine": {
          "default": "\r\n",
          "description": "Line termination sequence used to delimit incoming messages.",
          "title": "NewLine",
          "type": "string"
        },
        "parity": {
          "default": "None",
          "description": "Parity checking mode for the serial port.",
          "title": "Parity",
          "type": "string"
        },
        "parityReplace": {
          "default": 63,
          "description": "Byte used to replace invalid bytes detected by a parity error.",
          "title": "ParityReplace",
          "type": "integer"
        },
        "dataBits": {
          "default": 8,
          "description": "Number of data bits per serial frame.",
          "title": "DataBits",
          "type": "integer"
        },
        "stopBits": {
          "default": "One",
          "description": "Number of stop bits per serial frame.",
          "title": "StopBits",
          "type": "string"
        },
        "handshake": {
          "default": "None",
          "description": "Hardware or software handshaking mode.",
          "title": "Handshake",
          "type": "string"
        },
        "discardNull": {
          "default": false,
          "description": "Whether to discard null bytes appearing in the serial stream.",
          "title": "DiscardNull",
          "type": "boolean"
        },
        "dtrEnable": {
          "default": false,
          "description": "Whether to enable Data Terminal Ready (DTR) control line.",
          "title": "DtrEnable",
          "type": "boolean"
        },
        "rtsEnable": {
          "default": false,
          "description": "Whether to enable Request To Send (RTS) control line.",
          "title": "RtsEnable",
          "type": "boolean"
        },
        "readBufferSize": {
          "default": 4096,
          "description": "Size, in bytes, of the read buffer.",
          "title": "ReadBufferSize",
          "type": "integer"
        },
        "writeBufferSize": {
          "default": 2048,
          "description": "Size, in bytes, of the write buffer.",
          "title": "WriteBufferSize",
          "type": "integer"
        },
        "receivedBytesThreshold": {
          "default": 1,
          "description": "Minimum number of bytes in the buffer that triggers a read event.",
          "title": "ReceivedBytesThreshold",
          "type": "integer"
        },
        "serialMessageSubjectName": {
          "default": "SerialMessages",
          "description": "Name of the subject to which parsed serial messages are published.",
          "title": "SerialMessageSubjectName",
          "type": "string"
        }
      },
      "required": [
        "portName"
      ],
      "title": "MatrixArduinoPhotodiode",
      "type": "object"
    },
    "MatrixArduinoPhotodiodeData": {
      "properties": {
        "photodiodeVal": {
          "title": "PhotodiodeVal",
          "type": "integer"
        },
        "syncVal": {
          "title": "SyncVal",
          "type": "integer"
        }
      },
      "required": [
        "photodiodeVal",
        "syncVal"
      ],
      "title": "MatrixArduinoPhotodiodeData",
      "type": "object"
    },
    "Screen": {
      "properties": {
        "deviceType": {
          "const": "Screen",
          "default": "Screen",
          "description": "Device type",
          "title": "DeviceType",
          "type": "string"
        },
        "displayIndex": {
          "default": 1,
          "description": "Display index",
          "title": "DisplayIndex",
          "type": "integer"
        },
        "targetRenderFrequency": {
          "default": 60,
          "description": "Target render frequency",
          "title": "TargetRenderFrequency",
          "type": "number"
        },
        "targetUpdateFrequency": {
          "default": 120,
          "description": "Target update frequency",
          "title": "TargetUpdateFrequency",
          "type": "number"
        },
        "textureAssetsDirectory": {
          "default": "Textures",
          "description": "Calibration directory",
          "title": "TextureAssetsDirectory",
          "type": "string"
        },
        "calibration": {
          "default": null,
          "description": "Calibration parameters for a set of named display monitors for visual stimuli",
          "oneOf": [
            {
              "additionalProperties": {
                "$ref": "#/$defs/DisplayCalibration"
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "title": "Calibration"
        },
        "brightness": {
          "default": 0,
          "description": "Brightness",
          "maximum": 1,
          "minimum": -1,
          "title": "Brightness",
          "type": "number"
        },
        "contrast": {
          "default": 1,
          "description": "Contrast",
          "maximum": 1,
          "minimum": -1,
          "title": "Contrast",
          "type": "number"
        }
      },
      "title": "Screen",
      "type": "object"
    },
    "SyncQuad": {
      "properties": {
        "extentX": {
          "title": "ExtentX",
          "type": "number"
        },
        "extentY": {
          "title": "ExtentY",
          "type": "number"
        },
        "locationX": {
          "title": "LocationX",
          "type": "number"
        },
        "locationY": {
          "title": "LocationY",
          "type": "number"
        }
      },
      "required": [
        "extentX",
        "extentY",
        "locationX",
        "locationY"
      ],
      "title": "SyncQuad",
      "type": "object"
    },
    "UclOpenHfVisualRig": {
      "properties": {
        "version": {
          "const": "0.0.0-rc1",
          "default": "0.0.0-rc1",
          "title": "Version",
          "type": "string"
        },
        "screen": {
          "$ref": "#/$defs/Screen"
        },
        "syncQuad": {
          "$ref": "#/$defs/SyncQuad"
        },
        "arduino": {
          "$ref": "#/$defs/MatrixArduino",
          "title": "Arduino"
        },
        "arduinoPhotodiode": {
          "$ref": "#/$defs/MatrixArduinoPhotodiode",
          "title": "ArduinoPhotodiode"
        }
      },
      "required": [
        "screen",
        "syncQuad",
        "arduino",
        "arduinoPhotodiode"
      ],
      "title": "UclOpenHfVisualRig",
      "type": "object"
    },
    "UclOpenHfVisualTaskLogic": {
      "properties": {
        "version": {
          "const": "0.0.0-rc1",
          "default": "0.0.0-rc1",
          "title": "Version",
          "type": "string"
        },
        "name": {
          "const": "UclOpenHfVisual",
          "default": "UclOpenHfVisual",
          "description": "Name of the task logic",
          "title": "Name",
          "type": "string"
        },
        "taskParameters": {
          "$ref": "#/$defs/UclOpenHfVisualTaskParameters",
          "description": "Parameters of the task logic",
          "title": "TaskParameters"
        }
      },
      "required": [
        "taskParameters"
      ],
      "title": "UclOpenHfVisualTaskLogic",
      "type": "object"
    },
    "UclOpenHfVisualTaskParameters": {
      "properties": {
        "rngSeed": {
          "default": null,
          "description": "Seed of the random number generator",
          "oneOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "title": "RngSeed"
        },
        "availableTextures": {
          "items": {
            "type": "string"
          },
          "title": "AvailableTextures",
          "type": "array"
        },
        "interPresentationTexture": {
          "title": "InterPresentationTexture",
          "type": "string"
        },
        "presentationTime": {
          "title": "PresentationTime",
          "type": "number"
        },
        "interPresentationTime": {
          "title": "InterPresentationTime",
          "type": "number"
        }
      },
      "required": [
        "availableTextures",
        "interPresentationTexture",
        "presentationTime",
        "interPresentationTime"
      ],
      "title": "UclOpenHfVisualTaskParameters",
      "type": "object"
    },
    "UclOpenSession": {
      "properties": {
        "workflow": {
          "description": "Path to the workflow running the experiment.",
          "title": "Workflow",
          "type": "string"
        },
        "commit": {
          "description": "Commit hash of the experiment/rig repo.",
          "title": "Commit",
          "type": "string"
        },
        "repositoryUrl": {
          "description": "The URL of the git repository used to version experiment source code.",
          "title": "RepositoryUrl",
          "type": "string"
        },
        "loggingRootPath": {
          "title": "LoggingRootPath",
          "type": "string"
        },
        "animalId": {
          "title": "AnimalId",
          "type": "string"
        },
        "sessionId": {
          "title": "SessionId",
          "type": "string"
        }
      },
      "required": [
        "workflow",
        "commit",
        "repositoryUrl",
        "loggingRootPath",
        "animalId",
        "sessionId"
      ],
      "title": "UclOpenSession",
      "type": "object"
    },
    "Vector3": {
      "properties": {
        "x": {
          "description": "X coordinate of the point.",
          "title": "X",
          "type": "number"
        },
        "y": {
          "description": "Y coordinate of the point.",
          "title": "Y",
          "type": "number"
        },
        "z": {
          "description": "Z coordinate of the point.",
          "title": "Z",
          "type": "number"
        }
      },
      "required": [
        "x",
        "y",
        "z"
      ],
      "title": "Vector3",
      "type": "object"
    }
  }
}